{"version":3,"sources":["SocketApp/index.jsx","SocketApp/AppWs/index.jsx","SocketApp/SignUpLogin/index.jsx","reportWebVitals.js","index.js","SocketApp/theme.js"],"names":["App","useState","undefined","receivedData","setReceivedData","wsMessage","setWsMessage","allMessages","setAllMessages","signedInUser","setSignedInUser","allUsers","setAllUsers","reconnectingMsg","setReconnectingMsg","defaultConnectingMsg","pleaseLoginMsg","isDev","process","NODE_ENV","SERVER_ADDRESS","WS_SERVER_ADDRESS","AMENDED_SERVER_ADDRESS","ws","useRef","openSocket","props","current","WebSocket","onopen","console","log","onmessage","e","data","onclose","useEffect","currentWS","close","receivedDataJSON","JSON","parse","all_messages","message_to_client","is_update","user_name","all_online_users","cleanUpReceived","isLogout","ExportedApp","theme","MessageContainer","styled","div","p","colors","color3","indexNum","color2Lighter","MessageName","span","isYou","color1","MessageTime","color4","MessageContent","MsgForm","form","color2","MsgInput","input","color5","AllChat","ChatSpaceContainer","AllMessagesContainer","AllUsersContainer","mq","AllOnlineUsersContainer","UserName","AppWs","messageValue","setMessageValue","length","map","message","i","nextIsSame","name","time","moment","utc","local","format","usr","onSubmit","preventDefault","jsonObject","stringify","send","onChange","target","value","placeholder","TitleBar","LoginZone","RegisterButton","button","AuthZone","ServerMsg","AuthThings","SignedInUser","WelcomeName","Form","AuthTitle","SignUpLogin","userName","setUserName","password","setPassword","isLoginForm","setIsLoginForm","closeSocket","resetWs","resetNamePassword","className","onClick","fetch","method","headers","credentials","then","res","requestOptions","body","jsonData","json","catch","error","id","type","autoComplete","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","SocketApp","document","getElementById","bps","bp","facepaint","Global","styles","css","color_1"],"mappings":"+KAOMA,EAAM,WAAO,IAAD,MAGwBC,wBAASC,GAHjC,mBAGTC,EAHS,KAGKC,EAHL,OAIkBH,wBAASC,GAJ3B,mBAITG,EAJS,KAIEC,EAJF,OAKsBL,mBAAS,IAL/B,mBAKTM,EALS,KAKIC,EALJ,OAMwBP,wBAASC,GANjC,mBAMTO,EANS,KAMKC,EANL,OAOgBT,mBAAS,IAPzB,mBAOTU,EAPS,KAOCC,EAPD,OAQ8BX,wBAASC,GARvC,mBAQTW,EARS,KAQQC,EARR,KAUVC,EAAuB,wBACvBC,EAAiB,2BAWjBC,EAAmC,iBAApB,QAAP,EAAAC,SAAA,wLAAcC,UACtBC,EAAiBH,EACnB,mBACA,8BACEI,EAAiB,YAASJ,EAAc,GAAN,IAAjB,YAA6BG,EAA7B,QACjBE,EAAsB,cAAWL,EAAc,GAAN,IAAnB,YAA+BG,GAGrDG,EAAKC,iBAAO,MAWZC,EAAa,SAACC,GAClBZ,EAAmBC,GAInBQ,EAAGI,QAAU,IAAIC,UAAUP,GAEvBE,EAAGI,UACLJ,EAAGI,QAAQE,OAAS,WAClBC,QAAQC,IAAI,aAEZzB,OAAaJ,GACbY,OAAmBZ,IACnB,OAAIqB,QAAJ,IAAIA,OAAJ,EAAIA,EAAII,WACNJ,EAAGI,QAAQK,UAAY,SAACC,GACtB7B,EAAgB6B,EAAEC,SAIxBX,EAAGI,QAAQQ,QAAU,WACnBL,QAAQC,IAAI,aACP1B,GAAWC,EAAaU,KAGjCF,OAAmBZ,IA4CrB,OAvCAkC,qBAAU,WACRX,IAEA,IAAMY,EAAS,OAAGd,QAAH,IAAGA,OAAH,EAAGA,EAAII,QAEtB,OAAO,WAEI,OAATU,QAAS,IAATA,KAAWC,WAEZ,IAEHF,qBAAU,WACR,IAAMG,EAAmBpC,EAAeqC,KAAKC,MAAMtC,GAAgB,IAEnE,OAAIoC,QAAJ,IAAIA,OAAJ,EAAIA,EAAkBG,cACpBlC,EAAegC,KAAKC,MAAMF,EAAiBG,eAE3ClC,EAAe,KAGjB,OAAI+B,QAAJ,IAAIA,OAAJ,EAAIA,EAAkBI,mBACpBrC,EAAaiC,EAAiBI,oBACrB,OAACJ,QAAD,IAACA,OAAD,EAACA,EAAkBK,YAC5BtC,EAAaD,IAGf,OAAIkC,QAAJ,IAAIA,OAAJ,EAAIA,EAAkBM,WACpBnC,EAAgB6B,EAAiBM,WAEjCnC,OAAgBR,IAGlB,OAAIqC,QAAJ,IAAIA,OAAJ,EAAIA,EAAkBO,kBACpBlC,EAAY2B,EAAiBO,kBAE7BlC,EAAY,MAEb,CAACT,IAGF,gCACE,cAAC,IAAD,CAEIoB,KACAE,aACAX,qBACAiC,gBApFgB,SAACrB,GAAW,IAC1BsB,GAAatB,GAAS,IAAtBsB,SACR5C,OAAgBF,GAChBM,EAAe,IACfE,OAAgBR,GAChBU,EAAY,IACZN,EAAa0C,EAAWhC,OAAiBd,IA+EnCa,uBACAF,kBACAR,YACAC,eACAG,eACAa,2BAGJ,cAAC,IAAD,CAEIC,KACAV,kBACAN,cACAI,WACAF,qBAcKwC,IAPK,kBAClB,eAAC,IAAD,CAAeC,MAAOA,IAAtB,UACE,cAAC,IAAD,IACA,cAAClD,EAAD,U,2KC/IEmD,EAAmBC,IAAOC,IAAV,wFAEX,SAACC,GAAD,OAAOA,EAAEJ,MAAMK,OAAOC,UACd,SAACF,GAAD,OACfA,EAAEG,SAAW,IAAM,EAAIH,EAAEJ,MAAMK,OAAOG,cAAgB,UAGpDC,EAAcP,IAAOQ,KAAV,wJACN,SAACN,GAAD,OAAOA,EAAEJ,MAAMK,OAAOC,UACtB,SAACF,GAAD,OAAOA,EAAEO,OAASP,EAAEJ,MAAMK,OAAOO,UAC3B,SAACR,GAAD,OAAQA,EAAEO,MAAQ,SAAW,UAMxCE,EAAcX,IAAOQ,KAAV,+DACN,SAACN,GAAD,OAAOA,EAAEJ,MAAMK,OAAOS,UAI3BC,EAAiBb,IAAOC,IAAV,yFAMda,EAAUd,IAAOe,KAAV,uJAOG,SAACb,GAAD,OAAOA,EAAEJ,MAAMK,OAAOa,UAGhCC,EAAWjB,IAAOkB,MAAV,2KAME,SAAChB,GAAD,OAAOA,EAAEJ,MAAMK,OAAOgB,UAC3B,SAACjB,GAAD,OAAOA,EAAEJ,MAAMK,OAAOC,UAG3BgB,EAAUpB,IAAOC,IAAV,6GAIG,SAACC,GAAD,OAAOA,EAAEJ,MAAMK,OAAOa,UAGhCK,EAAqBrB,IAAOC,IAAV,wMAEF,SAACC,GAAD,OAAOA,EAAEJ,MAAMK,OAAOO,UAQtCY,EAAuBtB,IAAOC,IAAV,mYAOV,SAACC,GAAD,OAAOA,EAAEJ,MAAMK,OAAOgB,UACjB,SAACjB,GAAD,gBACdA,EAAEJ,MAAMK,OAAOgB,OADD,YACWjB,EAAEJ,MAAMK,OAAOS,WAE7B,SAACV,GAAD,OAAOA,EAAEJ,MAAMK,OAAOS,UAGtB,SAACV,GAAD,OAAOA,EAAEJ,MAAMK,OAAOgB,UAE1B,SAACjB,GAAD,OAAOA,EAAEJ,MAAMK,OAAOS,UAI9BW,EAAoBvB,IAAOC,IAAV,mNAIN,SAACC,GAAD,OAAOA,EAAEJ,MAAMK,OAAOS,SACnCY,IAAG,IAIS,SAACtB,GAAD,OAAOA,EAAEJ,MAAMK,OAAOgB,UAC3B,SAACjB,GAAD,OAAOA,EAAEJ,MAAMK,OAAOC,UAG3BqB,EAA0BzB,IAAOC,IAAV,sUAMR,SAACC,GAAD,gBACdA,EAAEJ,MAAMK,OAAOgB,OADD,YACWjB,EAAEJ,MAAMK,OAAOS,WAE7B,SAACV,GAAD,OAAOA,EAAEJ,MAAMK,OAAOS,UAGtB,SAACV,GAAD,OAAOA,EAAEJ,MAAMK,OAAOgB,UAE1B,SAACjB,GAAD,OAAOA,EAAEJ,MAAMK,OAAOS,UAW9Bc,EAAW1B,IAAOC,IAAV,6PAGG,SAACC,GAAD,OAAQA,EAAEO,MAAQ,OAAS,YACpB,SAACP,GAAD,OAAOA,EAAEO,OAAS,cACtCe,IAAG,IASMG,EAAQ,SAACrD,GAAW,IACvBH,EAA6DG,EAA7DH,GAAIV,EAAyDa,EAAzDb,gBAAiBN,EAAwCmB,EAAxCnB,YAAaI,EAA2Be,EAA3Bf,SAAUF,EAAiBiB,EAAjBjB,aADtB,EAEUR,mBAAS,IAFnB,mBAEvB+E,EAFuB,KAETC,EAFS,KAmB9B,OACE,cAACT,EAAD,UACE,qCACE,eAACC,EAAD,WACE,cAACC,EAAD,WACI,OAACnE,QAAD,IAACA,OAAD,EAACA,EAAa2E,QAAf,OACG3E,QADH,IACGA,OADH,EACGA,EAAa4E,KAAI,SAACC,EAASC,GAAO,IAAD,EAC3BC,GAAa,UAAA/E,EAAY8E,EAAI,UAAhB,eAAoBE,QAASH,EAAQG,KAClDC,EAAOC,IACRC,IADQ,OACJN,QADI,IACJA,OADI,EACJA,EAASI,MACbG,QACAC,OAAO,uBACV,OACE,cAACzC,EAAD,CAEEM,SAAU4B,EAFZ,SAIE,iCACIC,GACA,qCACE,cAAC3B,EAAD,CAAaE,OAAc,OAAPuB,QAAO,IAAPA,OAAA,EAAAA,EAASG,QAAS9E,EAAtC,gBACG2E,QADH,IACGA,OADH,EACGA,EAASG,OAEZ,cAACxB,EAAD,UAAcyB,OAGlB,cAACvB,EAAD,iBAAiBmB,QAAjB,IAAiBA,OAAjB,EAAiBA,EAASA,aATX,OAAPA,QAAO,IAAPA,OAAA,EAAAA,EAASI,OAAT,OAAgBJ,QAAhB,IAAgBA,OAAhB,EAAgBA,EAASA,YAHvB,OAAPA,QAAO,IAAPA,OAAA,EAAAA,EAASA,SAAUC,GAAnB,OAAuBD,QAAvB,IAAuBA,OAAvB,EAAuBA,EAASI,UAiB3C3E,GACE,eAACsC,EAAD,WACE,cAACQ,EAAD,8BACA,cAACM,EAAD,UAAiBpD,SAI3B,cAAC8D,EAAD,UACE,cAACE,EAAD,UAEGpE,KAAgB,OAACE,QAAD,IAACA,OAAD,EAACA,EAAUuE,QAC1B,cAACJ,EAAD,6BACGrE,IAAgB,OAACE,QAAD,IAACA,OAAD,EAACA,EAAUuE,QAG9B,mCACGvE,EAASwE,KAAI,SAACU,EAAKR,GAClB,OACE,cAACP,EAAD,CAAwBjB,MAAOgC,IAAQpF,EAAvC,SAEGoF,IAAQpF,EAAR,uBAA6BoF,GAAQA,GAFzBR,EAAIQ,QALzB,cAACf,EAAD,kCAgBR,cAACZ,EAAD,CAAS4B,SA3EM,SAAC7D,GAAO,IAAD,IAC1BA,EAAE8D,iBAEF,IAAMC,EAAaxD,KAAKyD,UAAU,CAChCb,QAASJ,KAET,OAAFzD,QAAE,IAAFA,GAAA,UAAAA,EAAII,eAAJ,eAAauE,QAAb,OAAqB3E,QAArB,IAAqBA,GAArB,UAAqBA,EAAII,eAAzB,OAAqB,EAAauE,KAAKF,IAEvCf,EAAgB,KAmEZ,SACE,cAACZ,EAAD,CACE8B,SAlEW,SAAClE,GACpBgD,EAAgBhD,EAAEmE,OAAOC,QAkEjBC,YAAa,kBACbD,MAAOrB,a,oIC5NfuB,EAAWnD,IAAOC,IAAV,mPACD,SAACC,GAAD,OAAOA,EAAEJ,MAAMK,OAAOO,UAGjB,SAACR,GAAD,OAAOA,EAAEJ,MAAMK,OAAOa,UASlCoC,EAAYpD,IAAOC,IAAV,6DAKToD,EAAiBrD,IAAOsD,OAAV,0LAIF,SAACpD,GAAD,OAAOA,EAAEJ,MAAMK,OAAOgB,UAC3B,SAACjB,GAAD,OAAOA,EAAEJ,MAAMK,OAAOa,UAM7BuC,EAAWvD,IAAOC,IAAV,oiBAEI,SAACC,GAAD,OAAOA,EAAEJ,MAAMK,OAAOa,UAYpB,SAACd,GAAD,OAAOA,EAAEJ,MAAMK,OAAOO,UAC3B,SAACR,GAAD,OAAOA,EAAEJ,MAAMK,OAAOa,UAMjB,SAACd,GAAD,OAAOA,EAAEJ,MAAMK,OAAOS,UAC3B,SAACV,GAAD,OAAOA,EAAEJ,MAAMK,OAAOa,SAE/BQ,IAAG,IAOHgC,EAAYxD,IAAOC,IAAV,uFAMTwD,EAAazD,IAAOC,IAAV,uFAMVyD,EAAe1D,IAAOC,IAAV,sEAKZ0D,EAAc3D,IAAOC,IAAV,mJAQX2D,EAAO5D,IAAOe,KAAV,wXAYFS,IAAG,IAQLqC,EAAY7D,IAAOC,IAAV,gIAETuB,IAAG,IAOMsC,EAAc,SAAC,GAWrB,IAVL3F,EAUI,EAVJA,GACAE,EASI,EATJA,WAEAsB,GAOI,EARJjC,mBAQI,EAPJiC,iBAEAtC,GAKI,EANJM,qBAMI,EALJN,cAEAJ,GAGI,EAJJQ,gBAII,EAHJR,WACAC,EAEI,EAFJA,aACAgB,EACI,EADJA,uBACI,EAC4BrB,mBAAS,IADrC,mBACGkH,EADH,KACaC,EADb,OAE4BnH,mBAAS,IAFrC,mBAEGoH,EAFH,KAEaC,EAFb,OAGkCrH,oBAAS,GAH3C,mBAGGsH,EAHH,KAGgBC,EAHhB,KAOEC,EAAc,SAAC/F,GAAW,IAAD,EAC3B,OAAFH,QAAE,IAAFA,GAAA,UAAAA,EAAII,eAAJ,SAAaW,QACbS,EAAgBrB,IAGZgG,EAAU,WACdC,IACAF,IACAhG,KA0DIkG,EAAoB,WACxBP,EAAY,IACZE,EAAY,KAGd,OACE,eAACd,EAAD,WACE,eAACD,EAAD,yBAEI9F,GACA,cAACgG,EAAD,CACEmB,UAAU,MACVC,QAAS,WACPF,IACAH,GAAgBD,IAJpB,SAOGA,EAAc,YAAc,cAInC,eAACZ,EAAD,WACE,cAACC,EAAD,UAAYvG,GAAa,8BAAMA,MAC/B,cAACwG,EAAD,UACIpG,EA4BA,qCACGA,GACC,eAACqG,EAAD,uBACW,cAACC,EAAD,UAActG,OAG3B,wBAAQoH,QA9EC,SAAC5F,GACpBA,EAAE8D,iBAOF+B,MAAM,GAAD,OAAIxG,EAAJ,YANkB,CACrByG,OAAQ,MACRC,QAAS,CAAE,eAAgB,oBAC3BC,YAAa,YAG4CC,MAAK,SAACC,GAC/DV,EAAY,CAAEzE,UAAU,QAqEhB,wBAjCF,qCACE,cAACiE,EAAD,UACGM,EAAc,aAAe,kBAEhC,eAACP,EAAD,CAAMlB,SAAUyB,EAtEP,SAACtF,GACpBA,EAAE8D,iBACF,IAAMqC,EAAiB,CACrBL,OAAQ,OACRC,QAAS,CAAE,eAAgB,oBAC3BC,YAAa,UACbI,KAAM7F,KAAKyD,UAAU,CAAEpD,UAAWsE,EAAUE,SAAUA,KAExDS,MAAM,GAAD,OAAIxG,EAAJ,WAAqC8G,GACvCF,MAAK,SAACC,GACLrG,QAAQC,IAAIoG,GACZ,IAAMG,EAAWH,EAAII,OACrBzG,QAAQC,IAAI,CAAEuG,aACdA,EAASJ,MAAK,SAACG,GAAD,OAAU/H,EAAa+H,MACrCX,OAEDc,OAAM,SAACvG,GACNH,QAAQ2G,MAAM,gBAAiBxG,OA/BhB,SAACA,GACpBA,EAAE8D,iBACF,IAAMqC,EAAiB,CACrBL,OAAQ,OACRC,QAAS,CAAE,eAAgB,oBAC3BC,YAAa,UACbI,KAAM7F,KAAKyD,UAAU,CAAEpD,UAAWsE,EAAUE,SAAUA,KAExDS,MAAM,GAAD,OAAIxG,EAAJ,YAAsC8G,GAAgBF,MAAK,SAACC,GAC/DA,EAAII,OAAOL,MAAK,SAACG,GAAD,OAAU/H,EAAa+H,MACvCX,QA0EQ,UACE,uBACEgB,GAAG,YACHC,KAAK,OACLrC,YAAY,OACZsC,aAAa,WACbzC,SA1CS,SAAClE,GACxBmF,EAAYnF,EAAEmE,OAAOC,QA0CPA,MAAOc,IAET,uBACEuB,GAAG,gBACHpC,YAAY,WACZqC,KAAK,WACLC,aACErB,EAAc,mBAAqB,eAErCpB,SAjDa,SAAClE,GAC5BqF,EAAYrF,EAAEmE,OAAOC,QAiDPA,MAAOgB,IAET,uBAAOsB,KAAK,SAAStC,MAAM,2B,oFC9O5BwC,EAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,6BAAqBb,MAAK,YAAkD,IAA/Cc,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOF,GACPG,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAQN,O,OCFdO,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAACC,EAAA,EAAD,MAEFC,SAASC,eAAe,SAM1Bb,K,wKCZMc,EAAM,CAAC,MAAO,MAAO,MAAO,QAErB/E,EAAK+E,EAAIxE,KAAI,SAACyE,GAAD,mCAA8BA,EAA9B,UAUb1G,GATQyG,EAAIxE,KAAI,SAACyE,GAAD,mCAA8BA,EAA9B,UAEVC,YAAU,CAAC,qBAAD,OACNF,EAAI,GADE,mCAENA,EAAI,GAFE,mCAGNA,EAAI,GAHE,mCAINA,EAAI,GAJE,SAOR,CACnBpG,OAAQ,CACNO,OAAQ,UACRM,OAAQ,UACRV,cAAe,4BACfF,OAAQ,UACRQ,OAAQ,UACRO,OAAQ,aAICuF,EAAS,kBACpB,cAAC,IAAD,CACEC,OAAQ,SAACzG,GAAD,OAAO0G,YAAN,IAAD,0TAaO,SAAC1G,GAAD,OAAOA,EAAEJ,MAAMK,OAAO0G,iB","file":"static/js/main.ebaaf20f.chunk.js","sourcesContent":["import React, { useState, useRef, useEffect } from \"react\";\nimport { AppWs } from \"./AppWs\";\nimport { SignUpLogin } from \"./SignUpLogin\";\n// import testData from \"./test.json\";\nimport { Global, theme } from \"./theme\";\nimport { ThemeProvider } from \"@emotion/react\";\n\nconst App = () => {\n  // DATA from server\n  // const [receivedData, setReceivedData] = useState(JSON.stringify(testData));\n  const [receivedData, setReceivedData] = useState(undefined);\n  const [wsMessage, setWsMessage] = useState(undefined);\n  const [allMessages, setAllMessages] = useState([]);\n  const [signedInUser, setSignedInUser] = useState(undefined);\n  const [allUsers, setAllUsers] = useState([]);\n  const [reconnectingMsg, setReconnectingMsg] = useState(undefined);\n\n  const defaultConnectingMsg = \"Attempting to Connect\";\n  const pleaseLoginMsg = \"Please login or register\";\n\n  //68.183.138.33:8081;\n\n  // LOCAL SETUP\n  // const SERVER_ADDRESS = \"//127.0.0.1:8081\";\n  // const WS_SERVER_ADDRESS = `ws:${SERVER_ADDRESS}/ws/`;\n  // const AMENDED_SERVER_ADDRESS = `http:${SERVER_ADDRESS}`;\n\n  // console.log(process.env);\n  // PROD SETUP\n  const isDev = process?.env?.NODE_ENV === \"development\";\n  const SERVER_ADDRESS = isDev\n    ? \"//127.0.0.1:8081\"\n    : \"//chat.freedivingsource.com\";\n  const WS_SERVER_ADDRESS = `ws${!isDev ? \"s\" : \"\"}:${SERVER_ADDRESS}/ws/`;\n  const AMENDED_SERVER_ADDRESS = `http${!isDev ? \"s\" : \"\"}:${SERVER_ADDRESS}`;\n\n  // FRONT END SOCKET\n  const ws = useRef(null);\n\n  const cleanUpReceived = (props) => {\n    const { isLogout } = props || {};\n    setReceivedData(undefined);\n    setAllMessages([]);\n    setSignedInUser(undefined);\n    setAllUsers([]);\n    setWsMessage(isLogout ? pleaseLoginMsg : undefined);\n  };\n\n  const openSocket = (props) => {\n    setReconnectingMsg(defaultConnectingMsg);\n\n    // origin: \"https://chat.freedivingsource.com\"\n    // setTimeout(() => {\n    ws.current = new WebSocket(WS_SERVER_ADDRESS);\n\n    if (ws.current) {\n      ws.current.onopen = () => {\n        console.log(\"ws opened\");\n        // reset messages\n        setWsMessage(undefined);\n        setReconnectingMsg(undefined);\n        if (ws?.current) {\n          ws.current.onmessage = (e) => {\n            setReceivedData(e.data);\n          };\n        }\n      };\n      ws.current.onclose = () => {\n        console.log(\"ws closed\");\n        if (!wsMessage) setWsMessage(pleaseLoginMsg);\n      };\n    }\n    setReconnectingMsg(undefined);\n    // }, 2000);\n  };\n\n  // open the socket on page load\n  useEffect(() => {\n    openSocket();\n\n    const currentWS = ws?.current;\n\n    return () => {\n      // close the socket\n      currentWS?.close();\n    };\n  }, []);\n\n  useEffect(() => {\n    const receivedDataJSON = receivedData ? JSON.parse(receivedData) : {};\n\n    if (receivedDataJSON?.all_messages) {\n      setAllMessages(JSON.parse(receivedDataJSON.all_messages));\n    } else {\n      setAllMessages([]);\n    }\n\n    if (receivedDataJSON?.message_to_client) {\n      setWsMessage(receivedDataJSON.message_to_client);\n    } else if (!receivedDataJSON?.is_update) {\n      setWsMessage(wsMessage);\n    }\n\n    if (receivedDataJSON?.user_name) {\n      setSignedInUser(receivedDataJSON.user_name);\n    } else {\n      setSignedInUser(undefined);\n    }\n\n    if (receivedDataJSON?.all_online_users) {\n      setAllUsers(receivedDataJSON.all_online_users);\n    } else {\n      setAllUsers([]);\n    }\n  }, [receivedData]);\n\n  return (\n    <div>\n      <SignUpLogin\n        {...{\n          ws,\n          openSocket,\n          setReconnectingMsg,\n          cleanUpReceived,\n          defaultConnectingMsg,\n          reconnectingMsg,\n          wsMessage,\n          setWsMessage,\n          signedInUser,\n          AMENDED_SERVER_ADDRESS,\n        }}\n      />\n      <AppWs\n        {...{\n          ws,\n          reconnectingMsg,\n          allMessages,\n          allUsers,\n          signedInUser,\n        }}\n      />\n    </div>\n  );\n};\n\nconst ExportedApp = () => (\n  <ThemeProvider theme={theme}>\n    <Global />\n    <App />\n  </ThemeProvider>\n);\n\nexport default ExportedApp;\n","import React, { useState } from \"react\";\nimport styled from \"@emotion/styled\";\nimport moment from \"moment\";\nimport { mq } from \"../theme\";\n\nconst MessageContainer = styled.div`\n  padding: 0 5px;\n  color: ${(p) => p.theme.colors.color3};\n  /* background: ${(p) =>\n    p.indexNum % 2 === 0 ? p.theme.colors.color2Lighter : \"none\"}; */\n`;\n\nconst MessageName = styled.span`\n  color: ${(p) => p.theme.colors.color3};\n  color: ${(p) => p.isYou && p.theme.colors.color1};\n  font-weight: ${(p) => (p.isYou ? \"bolder\" : \"bold\")};\n  font-size: 12px;\n  padding: 15px 15px 0 0;\n  display: inline-block;\n`;\n\nconst MessageTime = styled.span`\n  color: ${(p) => p.theme.colors.color4};\n  font-size: 11px;\n`;\n\nconst MessageContent = styled.div`\n  padding: 2px 0;\n  font-size: 12px;\n  line-height: 15px;\n`;\n\nconst MsgForm = styled.form`\n  position: fixed;\n  bottom: 0;\n  width: 100%;\n  height: 60px;\n  margin: 0;\n  padding: 10px 0 0;\n  background: ${(p) => p.theme.colors.color2};\n`;\n\nconst MsgInput = styled.input`\n  width: calc(100% - 6px);\n  border-radius: 3px;\n  padding: 10px 3px;\n  resize: none;\n  margin: 0 3px;\n  background: ${(p) => p.theme.colors.color5};\n  color: ${(p) => p.theme.colors.color3};\n`;\n\nconst AllChat = styled.div`\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  background: ${(p) => p.theme.colors.color2};\n`;\n\nconst ChatSpaceContainer = styled.div`\n  display: flex;\n  border: 1px solid ${(p) => p.theme.colors.color1};\n  border-radius: 3px;\n  /* padding: 0 5px 0; */\n  margin: 0 5px;\n  background: white;\n  height: calc(100vh - 60px - 90px);\n`;\n\nconst AllMessagesContainer = styled.div`\n  width: calc(100% - 120px);\n  /* overflow: scroll; */\n  overflow-y: scroll;\n  display: flex;\n  flex-direction: column-reverse;\n  flex-grow: 1;\n  background: ${(p) => p.theme.colors.color5};\n  scrollbar-color: ${(p) =>\n    `${p.theme.colors.color5} ${p.theme.colors.color4}`};\n  ::-webkit-scrollbar {\n    background: ${(p) => p.theme.colors.color4};\n  }\n  ::-webkit-scrollbar-thumb {\n    background: ${(p) => p.theme.colors.color5};\n    border-radius: 10px;\n    border: ${(p) => p.theme.colors.color4} 1px solid;\n  }\n`;\n\nconst AllUsersContainer = styled.div`\n  width: 120px;\n  padding-left: 10px;\n  overflow-y: hidden;\n  border-left: ${(p) => p.theme.colors.color4} 1px solid;\n  ${mq[2]} {\n    width: 75px;\n    font-size: 10px;\n  }\n  background: ${(p) => p.theme.colors.color5};\n  color: ${(p) => p.theme.colors.color3};\n`;\n\nconst AllOnlineUsersContainer = styled.div`\n  padding-top: 5px;\n  padding-bottom: 50px;\n  overflow-y: scroll;\n  overflow-x: hidden;\n  height: 100%;\n  scrollbar-color: ${(p) =>\n    `${p.theme.colors.color5} ${p.theme.colors.color4}`};\n  ::-webkit-scrollbar {\n    background: ${(p) => p.theme.colors.color4};\n  }\n  ::-webkit-scrollbar-thumb {\n    background: ${(p) => p.theme.colors.color5};\n    border-radius: 10px;\n    border: ${(p) => p.theme.colors.color4} 1px solid;\n  }\n`;\n\n// const CurUsersTitle = styled.div`\n//   color: ${(p) => p.theme.colors.color1};\n//   font-weight: bold;\n//   padding-bottom: 5px;\n//   /* position: fixed; */\n// `;\n\nconst UserName = styled.div`\n  font-size: 12px;\n  white-space: nowrap;\n  font-weight: ${(p) => (p.isYou ? \"bold\" : \"normal\")};\n  /* text-decoration: ${(p) => p.isYou && \"underline\"}; */\n  ${mq[2]} {\n    /* width: 75px; */\n    font-size: 10px;\n  }\n  overflow: hidden;\n  max-width: 100%;\n  text-overflow: ellipsis;\n`;\n\nexport const AppWs = (props) => {\n  const { ws, reconnectingMsg, allMessages, allUsers, signedInUser } = props;\n  const [messageValue, setMessageValue] = useState(\"\");\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n\n    const jsonObject = JSON.stringify({\n      message: messageValue,\n    });\n    ws?.current?.send && ws?.current?.send(jsonObject);\n\n    setMessageValue(\"\");\n  };\n\n  const handleChange = (e) => {\n    setMessageValue(e.target.value);\n  };\n\n  return (\n    <AllChat>\n      <>\n        <ChatSpaceContainer>\n          <AllMessagesContainer>\n            {!!allMessages?.length\n              ? allMessages?.map((message, i) => {\n                  let nextIsSame = allMessages[i + 1]?.name === message.name;\n                  let time = moment\n                    .utc(message?.time)\n                    .local()\n                    .format(\"h:mm:ss a, D MMM YY\");\n                  return (\n                    <MessageContainer\n                      key={message?.message + i + message?.time}\n                      indexNum={i}\n                    >\n                      <div key={message?.time + message?.message}>\n                        {!nextIsSame && (\n                          <>\n                            <MessageName isYou={message?.name === signedInUser}>\n                              {message?.name}\n                            </MessageName>\n                            <MessageTime>{time}</MessageTime>\n                          </>\n                        )}\n                        <MessageContent>{message?.message}</MessageContent>\n                      </div>\n                    </MessageContainer>\n                  );\n                })\n              : reconnectingMsg && (\n                  <MessageContainer>\n                    <MessageName>From the server</MessageName>\n                    <MessageContent>{reconnectingMsg}</MessageContent>\n                  </MessageContainer>\n                )}\n          </AllMessagesContainer>\n          <AllUsersContainer>\n            <AllOnlineUsersContainer>\n              {/* <CurUsersTitle>Current users</CurUsersTitle> */}\n              {signedInUser && !allUsers?.length ? (\n                <UserName>...Nobody here</UserName>\n              ) : !signedInUser && !allUsers?.length ? (\n                <UserName>Please Login</UserName>\n              ) : (\n                <>\n                  {allUsers.map((usr, i) => {\n                    return (\n                      <UserName key={i + usr} isYou={usr === signedInUser}>\n                        {/* {usr === signedInUser ? `${usr} (you)` : usr} */}\n                        {usr === signedInUser ? `⭐️ ${usr}` : usr}\n                      </UserName>\n                    );\n                  })}\n                </>\n              )}\n            </AllOnlineUsersContainer>\n          </AllUsersContainer>\n        </ChatSpaceContainer>\n        <MsgForm onSubmit={handleSubmit}>\n          <MsgInput\n            onChange={handleChange}\n            placeholder={\"write a message\"}\n            value={messageValue}\n          />\n        </MsgForm>\n      </>\n    </AllChat>\n  );\n};\n","import React, { useState } from \"react\";\nimport styled from \"@emotion/styled\";\nimport { mq } from \"../theme\";\n\nlet TitleBar = styled.div`\n  color: ${(p) => p.theme.colors.color1};\n  font-size: 25px;\n  font-weight: bolder;\n  background: ${(p) => p.theme.colors.color2};\n  text-align: center;\n  /* padding: 10px 0; */\n  height: 40px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n`;\n\nlet LoginZone = styled.div`\n  width: 100%;\n  height: 90px;\n`;\n\nlet RegisterButton = styled.button`\n  border-radius: 10px;\n  margin: 0 2px 0 15px;\n  border: none;\n  background: ${(p) => p.theme.colors.color5};\n  color: ${(p) => p.theme.colors.color2};\n  padding: 6px 5px;\n  width: 60px;\n  font-size: 10px;\n`;\n\nlet AuthZone = styled.div`\n  height: 50px;\n  background: ${(p) => p.theme.colors.color2};\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 0 10px;\n  font-size: 14px;\n\n  input[type=\"submit\"],\n  button {\n    border-radius: 10px;\n    margin: 0 2px;\n    border: none;\n    background: ${(p) => p.theme.colors.color1};\n    color: ${(p) => p.theme.colors.color2};\n    padding: 4px 2px;\n    width: 45px;\n    font-size: 10px;\n  }\n  .alt {\n    background: ${(p) => p.theme.colors.color4};\n    color: ${(p) => p.theme.colors.color2};\n  }\n  ${mq[2]} {\n    flex-direction: column;\n    justify-content: space-between;\n    padding: 5px 0;\n  }\n`;\n\nlet ServerMsg = styled.div`\n  height: 15px;\n  display: flex;\n  align-items: center;\n`;\n\nlet AuthThings = styled.div`\n  display: flex;\n  align-items: center;\n  height: 20px;\n`;\n\nlet SignedInUser = styled.div`\n  padding-right: 10px;\n  display: flex;\n`;\n\nlet WelcomeName = styled.div`\n  display: inline-block;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  max-width: 120px;\n  padding: 0 0 0 5px;\n`;\n\nlet Form = styled.form`\n  display: flex;\n  align-items: center;\n  input[type=\"text\"],\n  input[type=\"password\"] {\n    height: 28px;\n    margin-right: 5px;\n    border-radius: 5px;\n    border: 1px solid black;\n    padding: 5px;\n    /* margin-top: 2px; */\n    font-size: 12px;\n    ${mq[2]} {\n      font-size: 10px;\n      width: 100px;\n      height: 20px;\n    }\n  }\n`;\n\nlet AuthTitle = styled.div`\n  padding-right: 5px;\n  ${mq[2]} {\n    width: 50px;\n    font-size: 10px;\n    text-align: right;\n  }\n`;\n\nexport const SignUpLogin = ({\n  ws,\n  openSocket,\n  setReconnectingMsg,\n  cleanUpReceived,\n  defaultConnectingMsg,\n  signedInUser,\n  reconnectingMsg,\n  wsMessage,\n  setWsMessage,\n  AMENDED_SERVER_ADDRESS,\n}) => {\n  const [userName, setUserName] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [isLoginForm, setIsLoginForm] = useState(true);\n\n  // HIDE/SHOW authform\n\n  const closeSocket = (props) => {\n    ws?.current?.close();\n    cleanUpReceived(props);\n  };\n\n  const resetWs = () => {\n    resetNamePassword();\n    closeSocket();\n    openSocket();\n  };\n\n  const handleSignUp = (e) => {\n    e.preventDefault();\n    const requestOptions = {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      credentials: \"include\",\n      body: JSON.stringify({ user_name: userName, password: password }),\n    };\n    fetch(`${AMENDED_SERVER_ADDRESS}/signup/`, requestOptions).then((res) => {\n      res.json().then((body) => setWsMessage(body));\n      resetWs();\n    });\n  };\n\n  const handleSignIn = (e) => {\n    e.preventDefault();\n    const requestOptions = {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      credentials: \"include\",\n      body: JSON.stringify({ user_name: userName, password: password }),\n    };\n    fetch(`${AMENDED_SERVER_ADDRESS}/login/`, requestOptions)\n      .then((res) => {\n        console.log(res);\n        const jsonData = res.json();\n        console.log({ jsonData });\n        jsonData.then((body) => setWsMessage(body));\n        resetWs();\n      })\n      .catch((e) => {\n        console.error(\"sign in error\", e);\n      });\n  };\n\n  const handleLogOut = (e) => {\n    e.preventDefault();\n    const requestOptions = {\n      method: \"GET\",\n      headers: { \"Content-Type\": \"application/json\" },\n      credentials: \"include\",\n      // body: JSON.stringify({ user_name: userName, password: password }),\n    };\n    fetch(`${AMENDED_SERVER_ADDRESS}/logout/`, requestOptions).then((res) => {\n      closeSocket({ isLogout: true });\n    });\n  };\n\n  const handleUserChange = (e) => {\n    setUserName(e.target.value);\n  };\n  const handlePasswordChange = (e) => {\n    setPassword(e.target.value);\n  };\n\n  const resetNamePassword = () => {\n    setUserName(\"\");\n    setPassword(\"\");\n  };\n\n  return (\n    <LoginZone>\n      <TitleBar>\n        Rusty Chat\n        {!signedInUser && (\n          <RegisterButton\n            className=\"alt\"\n            onClick={() => {\n              resetNamePassword();\n              setIsLoginForm(!isLoginForm);\n            }}\n          >\n            {isLoginForm ? \"Register?\" : \"Login?\"}\n          </RegisterButton>\n        )}\n      </TitleBar>\n      <AuthZone>\n        <ServerMsg>{wsMessage && <div>{wsMessage}</div>}</ServerMsg>\n        <AuthThings>\n          {!signedInUser ? (\n            <>\n              <AuthTitle>\n                {isLoginForm ? \"Login here\" : \"Register here\"}\n              </AuthTitle>\n              <Form onSubmit={isLoginForm ? handleSignIn : handleSignUp}>\n                <input\n                  id=\"userInput\"\n                  type=\"text\"\n                  placeholder=\"Name\"\n                  autoComplete=\"username\"\n                  onChange={handleUserChange}\n                  value={userName}\n                />\n                <input\n                  id=\"passwordInput\"\n                  placeholder=\"password\"\n                  type=\"password\"\n                  autoComplete={\n                    isLoginForm ? \"current-password\" : \"new-password\"\n                  }\n                  onChange={handlePasswordChange}\n                  value={password}\n                />\n                <input type=\"submit\" value=\"Submit\" />\n              </Form>\n            </>\n          ) : (\n            <>\n              {signedInUser && (\n                <SignedInUser>\n                  Welcome, <WelcomeName>{signedInUser}</WelcomeName>\n                </SignedInUser>\n              )}\n              <button onClick={handleLogOut}>Log out</button>\n            </>\n          )}\n        </AuthThings>\n      </AuthZone>\n    </LoginZone>\n  );\n};\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport SocketApp from \"./SocketApp\";\nimport reportWebVitals from \"./reportWebVitals\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <SocketApp />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","import { Global as EmoGlobal, css } from \"@emotion/react\";\n\nimport facepaint from \"facepaint\";\nconst bps = [\"400\", \"600\", \"800\", \"1060\"];\n\nexport const mq = bps.map((bp) => `@media (max-width: ${bp}px)`);\nexport const mqMin = bps.map((bp) => `@media (min-width: ${bp}px)`);\n\nexport const mqO = facepaint([\n  `@media(max-width: ${bps[3]}px)`,\n  `@media(max-width: ${bps[2]}px)`,\n  `@media(max-width: ${bps[1]}px)`,\n  `@media(max-width: ${bps[0]}px)`,\n]);\n\nexport const theme = {\n  colors: {\n    color1: \"#b7410e\",\n    color2: \"#f4f7be\",\n    color2Lighter: \"rgba(244, 247, 191, 0.61)\",\n    color3: \"#e5f77d\",\n    color4: \"#deba6f\",\n    color5: \"#1e000e\",\n  },\n};\n\nexport const Global = () => (\n  <EmoGlobal\n    styles={(p) => css`\n      * {\n        box-sizing: border-box;\n      }\n      html {\n        height: 100%;\n      }\n      body {\n        font-family: \"Lato\", sans-serif;\n        margin: 0;\n        padding: 0;\n        a {\n          text-decoration: none;\n          color: ${(p) => p.theme.colors.color_1};\n        }\n      }\n    `}\n  />\n);\n"],"sourceRoot":""}