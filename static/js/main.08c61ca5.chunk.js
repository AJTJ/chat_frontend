(this.webpackJsonpchat_socket=this.webpackJsonpchat_socket||[]).push([[0],{18:function(n,e,t){"use strict";(function(n){var o,c=t(5),i=t(2),r=t(1),l=t(19),s=t(22),a=t(7),d=t(4),u=t(3),p=t(0),h=u.a.div(o||(o=Object(i.a)(["\n  display: flex;\n  flex-direction: column;\n  height: 100vh;\n  width: 100%;\n"]))),b=function(){var e,t,o=Object(r.useState)(void 0),i=Object(c.a)(o,2),a=i[0],d=i[1],u=Object(r.useState)(void 0),b=Object(c.a)(u,2),x=b[0],f=b[1],g=Object(r.useState)([]),j=Object(c.a)(g,2),v=j[0],m=j[1],O=Object(r.useState)(void 0),w=Object(c.a)(O,2),y=w[0],S=w[1],_=Object(r.useState)([]),k=Object(c.a)(_,2),E=k[0],C=k[1],D=Object(r.useState)(void 0),M=Object(c.a)(D,2),R=M[0],z=M[1],N="Attempting to Connect",T="Please login or register",L="development"===(null===(e=n)||void 0===e||null===(t=Object({NODE_ENV:"production",PUBLIC_URL:"/chat_frontend",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}))||void 0===t?void 0:t.NODE_ENV),F=L?"//127.0.0.1:8081":"//chat.freedivingsource.com",U="ws".concat(L?"":"s",":").concat(F,"/ws/"),I="http".concat(L?"":"s",":").concat(F),P=Object(r.useRef)(null),Y=function(n){z(N),P.current=new WebSocket(U),P.current&&(P.current.onopen=function(){console.log("ws opened"),f(void 0),z(void 0),(null===P||void 0===P?void 0:P.current)&&(P.current.onmessage=function(n){d(n.data)})},P.current.onclose=function(){console.log("ws closed"),x||f(T)}),z(void 0)};return Object(r.useEffect)((function(){Y();var n=null===P||void 0===P?void 0:P.current;return function(){null===n||void 0===n||n.close()}}),[]),Object(r.useEffect)((function(){var n=a?JSON.parse(a):{};(null===n||void 0===n?void 0:n.all_messages)?m(JSON.parse(n.all_messages)):m([]),(null===n||void 0===n?void 0:n.message_to_client)?f(n.message_to_client):(null===n||void 0===n?void 0:n.is_update)||f(x),(null===n||void 0===n?void 0:n.user_name)?S(n.user_name):S(void 0),(null===n||void 0===n?void 0:n.all_online_users)?C(n.all_online_users):C([])}),[a]),Object(p.jsxs)(h,{children:[Object(p.jsx)(s.a,{ws:P,openSocket:Y,setReconnectingMsg:z,cleanUpReceived:function(n){var e=(n||{}).isLogout;d(void 0),m([]),S(void 0),C([]),f(e?T:void 0)},defaultConnectingMsg:N,reconnectingMsg:R,wsMessage:x,setWsMessage:f,signedInUser:y,AMENDED_SERVER_ADDRESS:I}),Object(p.jsx)(l.a,{ws:P,reconnectingMsg:R,allMessages:v,allUsers:E,signedInUser:y})]})};e.a=function(){return Object(p.jsxs)(d.c,{theme:a.c,children:[Object(p.jsx)(a.a,{}),Object(p.jsx)(b,{})]})}}).call(this,t(27))},19:function(n,e,t){"use strict";t.d(e,"a",(function(){return U}));var o,c,i,r,l,s,a,d,u,p,h,b,x,f=t(5),g=t(2),j=t(1),v=t(3),m=t(20),O=t.n(m),w=t(7),y=t(0),S=v.a.div(o||(o=Object(g.a)(["\n  padding: 0 5px;\n  color: ",";\n  /* background: ","; */\n"])),(function(n){return n.theme.colors.color3}),(function(n){return n.indexNum%2===0?n.theme.colors.color2Lighter:"none"})),_=v.a.div(c||(c=Object(g.a)(["\n  padding: 15px 15px 5px 0;\n  display: flex;\n"]))),k=v.a.span(i||(i=Object(g.a)(["\n  display: inline-block;\n  color: ",";\n  color: ",";\n  font-weight: ",";\n  font-size: 12px;\n  display: inline-block;\n  max-width: 100px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n"])),(function(n){return n.theme.colors.color2}),(function(n){return n.isYou&&n.theme.colors.color1}),(function(n){return n.isYou?"bolder":"bold"})),E=v.a.span(r||(r=Object(g.a)(["\n  color: ",";\n  font-size: 12px;\n  padding-left: 10px;\n"])),(function(n){return n.theme.colors.color2Lighter})),C=v.a.div(l||(l=Object(g.a)(["\n  padding: 2px 0;\n  font-size: 12px;\n  line-height: 15px;\n"]))),D=v.a.form(s||(s=Object(g.a)(["\n  /* position: fixed; */\n  /* bottom: 0; */\n  /* flex-grow: 1; */\n  width: 100%;\n  height: 60px;\n  margin: 0;\n  padding: 10px 0 10px;\n  background: ",";\n"])),(function(n){return n.theme.colors.color2})),M=v.a.input(a||(a=Object(g.a)(["\n  width: calc(100% - 6px);\n  border-radius: 3px;\n  padding: 10px 3px;\n  resize: none;\n  margin: 0 3px;\n  background: ",";\n  color: ",";\n"])),(function(n){return n.theme.colors.color5}),(function(n){return n.theme.colors.color3})),R=v.a.div(d||(d=Object(g.a)(["\n  width: 100%;\n  display: flex;\n  height: calc(100% - 90px);\n  /* flex-grow: 1; */\n  flex-direction: column;\n  background: ",";\n"])),(function(n){return n.theme.colors.color2})),z=v.a.div(u||(u=Object(g.a)(["\n  display: flex;\n  border: 1px solid ",";\n  border-radius: 3px;\n  /* padding: 0 5px 0; */\n  margin: 0 5px;\n  flex-grow: 2;\n  /* max-height: calc(100% - 100px); */\n  overflow: hidden;\n  /* height: 100%; */\n  /* height: calc(100vh - 60px - 90px); */\n"])),(function(n){return n.theme.colors.color1})),N=v.a.div(p||(p=Object(g.a)(["\n  width: calc(100% - 120px);\n  /* overflow: scroll; */\n  overflow: hidden;\n  overflow-y: scroll;\n  display: flex;\n  flex-direction: column-reverse;\n  flex-grow: 1;\n  background: ",";\n  scrollbar-color: ",";\n  ::-webkit-scrollbar {\n    background: ",";\n  }\n  ::-webkit-scrollbar-thumb {\n    background: ",";\n    border-radius: 10px;\n    border: "," 1px solid;\n  }\n"])),(function(n){return n.theme.colors.color5}),(function(n){return"".concat(n.theme.colors.color5," ").concat(n.theme.colors.color4)}),(function(n){return n.theme.colors.color4}),(function(n){return n.theme.colors.color5}),(function(n){return n.theme.colors.color4})),T=v.a.div(h||(h=Object(g.a)(["\n  width: 120px;\n  padding-left: 10px;\n  overflow-y: hidden;\n  border-left: "," 1px solid;\n  "," {\n    width: 75px;\n    font-size: 10px;\n  }\n  background: ",";\n  color: ",";\n"])),(function(n){return n.theme.colors.color4}),w.b[2],(function(n){return n.theme.colors.color5}),(function(n){return n.theme.colors.color3})),L=v.a.div(b||(b=Object(g.a)(["\n  padding-top: 5px;\n  padding-bottom: 50px;\n  overflow-y: scroll;\n  overflow-x: hidden;\n  height: 100%;\n  scrollbar-color: ",";\n  ::-webkit-scrollbar {\n    background: ",";\n  }\n  ::-webkit-scrollbar-thumb {\n    background: ",";\n    border-radius: 10px;\n    border: "," 1px solid;\n  }\n"])),(function(n){return"".concat(n.theme.colors.color5," ").concat(n.theme.colors.color4)}),(function(n){return n.theme.colors.color4}),(function(n){return n.theme.colors.color5}),(function(n){return n.theme.colors.color4})),F=v.a.div(x||(x=Object(g.a)(["\n  font-size: 12px;\n  white-space: nowrap;\n  font-weight: ",";\n  /* text-decoration: ","; */\n  "," {\n    /* width: 75px; */\n    font-size: 10px;\n  }\n  overflow: hidden;\n  max-width: 100%;\n  text-overflow: ellipsis;\n"])),(function(n){return n.isYou?"bold":"normal"}),(function(n){return n.isYou&&"underline"}),w.b[2]),U=function(n){var e=n.ws,t=n.reconnectingMsg,o=n.allMessages,c=n.allUsers,i=n.signedInUser,r=Object(j.useState)(""),l=Object(f.a)(r,2),s=l[0],a=l[1];return Object(y.jsxs)(R,{children:[Object(y.jsxs)(z,{children:[Object(y.jsx)(N,{children:(null===o||void 0===o?void 0:o.length)?null===o||void 0===o?void 0:o.map((function(n,e){var t,c=(null===(t=o[e+1])||void 0===t?void 0:t.name)===n.name,r=O.a.utc(null===n||void 0===n?void 0:n.time).local().format("h:mm:ss a, D MMM YY");return Object(y.jsx)(S,{indexNum:e,children:Object(y.jsxs)("div",{children:[!c&&Object(y.jsxs)(_,{children:[Object(y.jsx)(k,{isYou:(null===n||void 0===n?void 0:n.name)===i,children:null===n||void 0===n?void 0:n.name}),Object(y.jsx)(E,{children:r})]}),Object(y.jsx)(C,{children:null===n||void 0===n?void 0:n.message})]},(null===n||void 0===n?void 0:n.time)+(null===n||void 0===n?void 0:n.message))},(null===n||void 0===n?void 0:n.message)+e+(null===n||void 0===n?void 0:n.time))})):t&&Object(y.jsxs)(S,{children:[Object(y.jsx)(k,{children:"From the server"}),Object(y.jsx)(C,{children:t})]})}),Object(y.jsx)(T,{children:Object(y.jsx)(L,{children:i&&!(null===c||void 0===c?void 0:c.length)?Object(y.jsx)(F,{children:"...Nobody here"}):i||(null===c||void 0===c?void 0:c.length)?Object(y.jsx)(y.Fragment,{children:c.map((function(n,e){return Object(y.jsx)(F,{isYou:n===i,children:n===i?"\u2b50\ufe0f ".concat(n):n},e+n)}))}):Object(y.jsx)(F,{children:"Please Login"})})})]}),Object(y.jsx)(D,{onSubmit:function(n){var t,o;n.preventDefault();var c=JSON.stringify({message:s});(null===e||void 0===e||null===(t=e.current)||void 0===t?void 0:t.send)&&(null===e||void 0===e||null===(o=e.current)||void 0===o||o.send(c)),a("")},children:Object(y.jsx)(M,{onChange:function(n){a(n.target.value)},placeholder:"write a message",value:s})})]})}},22:function(n,e,t){"use strict";t.d(e,"a",(function(){return R}));var o,c,i,r,l,s,a,d,u,p,h,b=t(5),x=t(2),f=t(1),g=t(3),j=t(7),v=t(0),m=g.a.div(o||(o=Object(x.a)(["\n  background: ",";\n  text-align: center;\n  position: relative;\n  height: 40px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"])),(function(n){return n.theme.colors.color2})),O=g.a.span(c||(c=Object(x.a)(["\n  color: ",";\n  font-size: 40px;\n  font-weight: bolder;\n  overflow: hidden;\n  white-space: nowrap;\n  z-index: 1;\n"])),(function(n){return n.theme.colors.color1})),w=g.a.div(i||(i=Object(x.a)(["\n  width: 100%;\n  height: 90px;\n"]))),y=g.a.button(r||(r=Object(x.a)(["\n  position: absolute;\n  right: 5px;\n  border-radius: 10px;\n  margin: 0 2px 0 15px;\n  border: none;\n  background: ",";\n  color: ",";\n  padding: 6px 5px;\n  width: 60px;\n  font-size: 10px;\n"])),(function(n){return n.theme.colors.color5}),(function(n){return n.theme.colors.color2})),S=g.a.div(l||(l=Object(x.a)(["\n  height: 50px;\n  background: ",';\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 0 10px;\n  font-size: 14px;\n\n  input[type="submit"],\n  button {\n    border-radius: 10px;\n    margin: 0 2px;\n    border: none;\n    background: ',";\n    color: ",";\n    padding: 4px 2px;\n    width: 45px;\n    font-size: 10px;\n  }\n  .alt {\n    background: ",";\n    color: ",";\n  }\n  "," {\n    flex-direction: column;\n    justify-content: space-between;\n    padding: 5px 0;\n  }\n"])),(function(n){return n.theme.colors.color2}),(function(n){return n.theme.colors.color1}),(function(n){return n.theme.colors.color2}),(function(n){return n.theme.colors.color4}),(function(n){return n.theme.colors.color2}),j.b[2]),_=g.a.div(s||(s=Object(x.a)(["\n  height: 15px;\n  display: flex;\n  align-items: center;\n"]))),k=g.a.div(a||(a=Object(x.a)(["\n  display: flex;\n  align-items: center;\n  height: 20px;\n"]))),E=g.a.div(d||(d=Object(x.a)(["\n  padding-right: 10px;\n  display: flex;\n"]))),C=g.a.div(u||(u=Object(x.a)(["\n  display: inline-block;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  max-width: 120px;\n  padding: 0 0 0 5px;\n"]))),D=g.a.form(p||(p=Object(x.a)(['\n  display: flex;\n  align-items: center;\n  input[type="text"],\n  input[type="password"] {\n    height: 28px;\n    margin-right: 5px;\n    border-radius: 5px;\n    border: 1px solid black;\n    padding: 5px;\n    /* margin-top: 2px; */\n    font-size: 12px;\n    '," {\n      font-size: 10px;\n      width: 100px;\n      height: 20px;\n    }\n  }\n"])),j.b[2]),M=g.a.div(h||(h=Object(x.a)(["\n  padding-right: 5px;\n  "," {\n    width: 50px;\n    font-size: 10px;\n    text-align: right;\n  }\n"])),j.b[2]),R=function(n){var e=n.ws,t=n.openSocket,o=(n.setReconnectingMsg,n.cleanUpReceived),c=(n.defaultConnectingMsg,n.signedInUser),i=(n.reconnectingMsg,n.wsMessage),r=n.setWsMessage,l=n.AMENDED_SERVER_ADDRESS,s=Object(f.useState)(""),a=Object(b.a)(s,2),d=a[0],u=a[1],p=Object(f.useState)(""),h=Object(b.a)(p,2),x=h[0],g=h[1],j=Object(f.useState)(!0),R=Object(b.a)(j,2),z=R[0],N=R[1],T=function(n){var t;null===e||void 0===e||null===(t=e.current)||void 0===t||t.close(),o(n)},L=function(){F(),T(),t()},F=function(){u(""),g("")};return Object(v.jsxs)(w,{children:[Object(v.jsxs)(m,{children:[Object(v.jsx)(O,{children:"Rusty Chat"}),!c&&Object(v.jsx)(y,{className:"alt",onClick:function(){F(),N(!z)},children:z?"Register?":"Login?"})]}),Object(v.jsxs)(S,{children:[Object(v.jsx)(_,{children:i&&Object(v.jsx)("div",{children:i})}),Object(v.jsx)(k,{children:c?Object(v.jsxs)(v.Fragment,{children:[c&&Object(v.jsxs)(E,{children:["Welcome, ",Object(v.jsx)(C,{children:c})]}),Object(v.jsx)("button",{onClick:function(n){n.preventDefault();fetch("".concat(l,"/logout/"),{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"}).then((function(n){T({isLogout:!0})}))},children:"Log out"})]}):Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(M,{children:z?"Login here":"Register here"}),Object(v.jsxs)(D,{onSubmit:z?function(n){n.preventDefault();var e={method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({user_name:d,password:x})};fetch("".concat(l,"/login/"),e).then((function(n){console.log(n);var e=n.json();console.log({jsonData:e}),e.then((function(n){return r(n)})),L()})).catch((function(n){console.error("sign in error",n)}))}:function(n){n.preventDefault();var e={method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({user_name:d,password:x})};fetch("".concat(l,"/signup/"),e).then((function(n){n.json().then((function(n){return r(n)})),L()}))},children:[Object(v.jsx)("input",{id:"userInput",type:"text",placeholder:"Name",autoComplete:"username",onChange:function(n){u(n.target.value)},value:d}),Object(v.jsx)("input",{id:"passwordInput",placeholder:"password",type:"password",autoComplete:z?"current-password":"new-password",onChange:function(n){g(n.target.value)},value:x}),Object(v.jsx)("input",{type:"submit",value:"Submit"})]})]})})]})]})}},34:function(n,e,t){"use strict";t.r(e);var o=t(1),c=t.n(o),i=t(17),r=t.n(i),l=t(18),s=function(n){n&&n instanceof Function&&t.e(3).then(t.bind(null,35)).then((function(e){var t=e.getCLS,o=e.getFID,c=e.getFCP,i=e.getLCP,r=e.getTTFB;t(n),o(n),c(n),i(n),r(n)}))},a=t(0);r.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(l.a,{})}),document.getElementById("root")),s()},7:function(n,e,t){"use strict";t.d(e,"b",(function(){return a})),t.d(e,"c",(function(){return d})),t.d(e,"a",(function(){return u}));var o,c=t(2),i=t(9),r=t(21),l=t(0),s=["400","600","800","1060"],a=s.map((function(n){return"@media (max-width: ".concat(n,"px)")})),d=(s.map((function(n){return"@media (min-width: ".concat(n,"px)")})),Object(r.a)(["@media(max-width: ".concat(s[3],"px)"),"@media(max-width: ".concat(s[2],"px)"),"@media(max-width: ".concat(s[1],"px)"),"@media(max-width: ".concat(s[0],"px)")]),{colors:{color1:"#b7410e",color2:"#f4f7be",color2Lighter:"rgba(244, 247, 191, 0.61)",color3:"#e5f77d",color4:"#deba6f",color5:"#1e000e"}}),u=function(){return Object(l.jsx)(i.a,{styles:function(n){return Object(i.b)(o||(o=Object(c.a)(['\n      * {\n        box-sizing: border-box;\n      }\n      html {\n        height: 100%;\n      }\n      body {\n        font-family: "Lato", sans-serif;\n        margin: 0;\n        padding: 0;\n        a {\n          text-decoration: none;\n          color: ',";\n        }\n      }\n    "])),(function(n){return n.theme.colors.color_1}))}})}}},[[34,1,2]]]);
//# sourceMappingURL=main.08c61ca5.chunk.js.map